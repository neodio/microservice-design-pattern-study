<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>상품 목록</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
</head>
<body>
<div class="container py-4">
    <nav class="navbar navbar-expand navbar-dark bg-dark rounded mb-4">
        <div class="navbar-nav">
            <a class="nav-link" th:href="@{'/products'}">전체 상품</a>
            <a class="nav-link" th:href="@{'/cart'}">장바구니</a>
            <a class="nav-link" th:href="@{'/orders'}">주문내역</a>
        </div>
    </nav>

    <h2>상품 목록</h2>

    <form class="row g-2 mb-4" th:action="@{'/products'}" method="get">
        <div class="col-md-4">
            <input class="form-control" type="text" name="category" placeholder="카테고리"
                   th:value="${selectedCategory}">
        </div>
        <div class="col-md-4">
            <input class="form-control" type="text" name="manufacturer" placeholder="제조사"
                   th:value="${selectedManufacturer}">
        </div>
        <div class="col-md-4">
            <button type="submit" class="btn btn-primary">검색</button>
        </div>
    </form>

    <table class="table table-striped">
        <thead class="table-dark">
        <tr>
            <th>상품명</th>
            <th>카테고리</th>
            <th>제조사</th>
            <th>가격</th>
            <th>장바구니</th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="prod : ${products}">
            <td th:text="${prod.name}"></td>
            <td th:text="${prod.category}"></td>
            <td th:text="${prod.manufacturer}"></td>
            <td th:text="${#numbers.formatInteger(prod.price, 3, 'COMMA')} + ' 원'"></td>
            <td>
                <a class="btn btn-sm btn-success"
                   th:href="@{'/cart/add'(productId=${prod.id})}">담기</a>
            </td>
        </tr>
        <tr th:if="${products.size()} == 0">
            <td colspan="5" class="text-center">상품이 없습니다.</td>
        </tr>
        </tbody>
    </table>
</div>
</body>
</html>
