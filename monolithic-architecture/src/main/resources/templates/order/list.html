<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>주문 내역</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
</head>
<body>
<div class="container py-4">
    <nav class="navbar navbar-expand navbar-dark bg-dark rounded mb-4">
        <div class="navbar-nav">
            <a class="nav-link" th:href="@{'/products'}">전체 상품</a>
            <a class="nav-link" th:href="@{'/cart'}">장바구니</a>
            <a class="nav-link" th:href="@{'/orders'}">주문내역</a>
        </div>
    </nav>

    <h2>주문 내역</h2>

    <div class="accordion" id="ordersAccordion">
        <div class="accordion-item" th:each="ord : ${orders}">
            <h2 class="accordion-header" th:id="'heading' + ${ord.id}">
                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                        th:data-bs-target="'#collapse' + ${ord.id}">
                    주문 번호: <span th:text="${ord.id}"></span>&nbsp;|&nbsp;
                    일시: <span th:text="${#temporals.format(ord.orderDate, 'yyyy-MM-dd HH:mm')}"></span>&nbsp;|&nbsp;
                    총액: <span th:text="${#numbers.formatInteger(ord.totalAmount, 3, 'COMMA')} + ' 원'"></span>
                </button>
            </h2>
            <div th:id="'collapse' + ${ord.id}" class="accordion-collapse collapse"
                 th:aria-labelledby="'heading' + ${ord.id}" data-bs-parent="#ordersAccordion">
                <div class="accordion-body">
                    <ul class="list-group">
                        <li class="list-group-item" th:each="item : ${ord.items}"
                            th:text="${item.product.name} + ' x ' + ${item.quantity} + '개 = ' + ${#numbers.formatInteger(item.price * item.quantity, 3, 'COMMA')} + ' 원'">
                        </li>
                    </ul>
                </div>
            </div>
        </div>
        <div th:if="${orders.size()} == 0" class="alert alert-info mt-3">
            아직 주문이 없습니다.
        </div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
